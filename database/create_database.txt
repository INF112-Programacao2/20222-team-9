/*utilidade p√∫blica:
ALTER TABLE vinyl_shop.nome_da_tabela AUTO_INCREMENT = 1;*/

create database `vinyl_shop`;

create table `vinyl_shop`.`client`
(
    `id`       int auto_increment not null primary key,
    `cpf`      varchar(11)  not null,
    `name`     varchar(128) not null,
    `email`    varchar(128) not null,
    `password` varchar(128) not null,
    `rank`     int          not null
);

create table `vinyl_shop`.`music`
(
    `id`       int auto_increment not null primary key,
    `name`     varchar(128) not null,
    `duration` double       not null
);

create table `vinyl_shop`.`playlist`
(
    `id`       int auto_increment not null primary key,
    `music_id` int not null,
    constraint `playlist_music_id_fk`
        foreign key (`music_id`) references `music` (`id`)
);

create table `vinyl_shop`.`vinyl`
(
    `id`           int auto_increment not null primary key,
    `playlist_id`  int          not null,
    `name`         varchar(128) not null,
    `genre`        varchar(128) not null,
    `composer`     varchar(128) not null,
    `featuring`    varchar(128) not null,
    `release_year` int          not null,
    `rarity`       int          not null,
    `price`        double       not null,  
    constraint `vinyl_playlist_id_fk`
        foreign key (`playlist_id`) references `playlist` (`id`)
);

create table `vinyl_shop`.`cart_items`
(
    `id`       int auto_increment not null primary key,
    `vinyl_id` int not null,
    constraint `cart_items_vinyl_id_fk`
        foreign key (`vinyl_id`) references `vinyl` (`id`)
);

create table `vinyl_shop`.`cart`
(
    `id`            int auto_increment not null primary key,
    `client_id`     int not null,
    `cart_items_id` int not null,
    constraint `cart_client_id_fk`
        foreign key (`client_id`) references `client` (`id`),
    constraint `cart_cart_items_id_fk`
        foreign key (`cart_items_id`) references `cart_items` (`id`)
);

create table `vinyl_shop`.`purchase`
(
    `id`        int auto_increment not null primary key,
    `client_id` int not null,
    `cart_id`   int not null,
    constraint `purchase_client_id_fk`
        foreign key (`client_id`) references `client` (`id`),
    constraint `purchase_cart_id_fk`
        foreign key (`cart_id`) references `cart` (`id`)
);

create table `vinyl_shop`.`user_teste`
(
    id       int auto_increment primary key,
    cpf      varchar(128) null,
    nome     varchar(128) null,
    senha    varchar(128) null
);